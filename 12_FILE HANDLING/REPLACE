#include <stdio.h>
#include <string.h>

int main() {
    FILE *fp1, *fp2;
    char fileName[100];
    char tempFile[] = "temp.txt";
    char str[1000], word[50], replace[50];

    printf("Enter the filename: ");
    scanf("%s", fileName);

    printf("Enter the word to replace: ");
    scanf("%s", word);

    printf("Enter the replacement word: ");
    scanf("%s", replace);

    // Open original and temp files
    fp1 = fopen(fileName, "r");
    fp2 = fopen(tempFile, "w");

    if (fp1 == NULL || fp2 == NULL) {
        printf("Error opening file.\n");
        return 1;
    }

    // Read each line and replace word
    while (fgets(str, sizeof(str), fp1) != NULL) {
        char *pos;
        while ((pos = strstr(str, word)) != NULL) {
            // Write text before the word
            *pos = '\0';
            fprintf(fp2, "%s", str);
            fprintf(fp2, "%s", replace);
            // Move pointer ahead
            strcpy(str, pos + strlen(word));
        }
        fprintf(fp2, "%s", str); // write the remaining part
    }

    fclose(fp1);
    fclose(fp2);

    // Replace original file with modified file
    remove(fileName);
    rename(tempFile, fileName);

    printf("Replacement done successfully.\n");

    return 0;
}
